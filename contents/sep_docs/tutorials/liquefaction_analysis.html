

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorial: Calculating liquefaction probabilities from a single earthquake &mdash; OpenQuake Model Building Toolkit Suite  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "math|output_area"}}</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="prev" title="Tutorial: Preparing site data for liquefaction analysis with the OQ-MBTK" href="liq_site_prep.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> OpenQuake Model Building Toolkit Suite
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cat.html">CAtalogue Toolkit (cat) module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../man.html">Model ANalysis (man) module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mbt.html">Model Building Toolkit (mbt) module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sub.html">SUBduction (sub) module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../sep.html">Secondary Perils Analysis using the OQ-MBTK</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../sep_models.html">Liquefaction and Landslide models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../liquefaction_data_prep.html">Site characterization for probabilistic liquefaction analysis</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="sep_tutorials.html">Tutorials for using the OQ-MBTK for analysis of secondary perils</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="liq_site_prep.html">Tutorial: Preparing site data for liquefaction analysis with the OQ-MBTK</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tutorial: Calculating liquefaction probabilities from a single earthquake</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Liquefaction-probabilities-using-the-HAZUS-model">Liquefaction probabilities using the HAZUS model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Liquefaction-probabilities-using-the-model-from-Zhu-et-al. (2015)">Liquefaction probabilities using the model from Zhu et al. (2015)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Comparison">Comparison</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Lateral-spreading-displacements">Lateral spreading displacements</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OpenQuake Model Building Toolkit Suite</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../sep.html">Secondary Perils Analysis using the OQ-MBTK</a> &raquo;</li>
        
          <li><a href="sep_tutorials.html">Tutorials for using the OQ-MBTK for analysis of secondary perils</a> &raquo;</li>
        
      <li>Tutorial: Calculating liquefaction probabilities from a single earthquake</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/contents/sep_docs/tutorials/liquefaction_analysis.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Tutorial:-Calculating-liquefaction-probabilities-from-a-single-earthquake">
<h1>Tutorial: Calculating liquefaction probabilities from a single earthquake<a class="headerlink" href="#Tutorial:-Calculating-liquefaction-probabilities-from-a-single-earthquake" title="Permalink to this headline">¶</a></h1>
<p>The OQ-MBTK has several models for calculating the probabilities of liquefaction and the displacements from liquefaction-induced lateral spreading given the magnitude of an earthquake, the Peak Ground Acceleration (PGA) at each site, and the susceptibility of each site to liquefaction (which is based on local geotechnical characteristics and a soil wetness variable or proxy).</p>
<p>These functions are quite easy to use and the calculations are very rapid.</p>
<p>Functionality for calculating these probabilities and displacements given a large number of earthquakes is being implemented in the OQ-Engine, but is not yet available. However, the functions below are easily incorporated into a script that can iterate over the results of an event-based PSHA, though this will not be demonstrated here.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import pandas as pd
import matplotlib.pyplot as plt

from openquake.sep.liquefaction import (
    zhu_liquefaction_probability_general,
    hazus_liquefaction_probability
)

from openquake.sep.liquefaction.lateral_spreading import (
    hazus_lateral_spreading_displacement
)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>sites = pd.read_csv(&quot;./tutorial_data/liquefaction_sites.csv&quot;)

sites.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lon</th>
      <th>lat</th>
      <th>unit</th>
      <th>susc_cat</th>
      <th>gwd</th>
      <th>vs30</th>
      <th>cti</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-76.540896</td>
      <td>3.350158</td>
      <td>TQplp</td>
      <td>n</td>
      <td>3.0</td>
      <td>425.0</td>
      <td>4.287466</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-76.544763</td>
      <td>3.350644</td>
      <td>TQplp</td>
      <td>n</td>
      <td>3.0</td>
      <td>425.0</td>
      <td>3.614118</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-76.528079</td>
      <td>3.346550</td>
      <td>TQplp</td>
      <td>n</td>
      <td>3.0</td>
      <td>425.0</td>
      <td>5.328922</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-76.529860</td>
      <td>3.356627</td>
      <td>TQplp</td>
      <td>n</td>
      <td>3.0</td>
      <td>425.0</td>
      <td>6.514543</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-76.527918</td>
      <td>3.351601</td>
      <td>TQplp</td>
      <td>n</td>
      <td>3.0</td>
      <td>425.0</td>
      <td>6.139852</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>event_mag = 7.2

event_pga = pd.read_csv(&quot;./tutorial_data/example_pga.csv&quot;)

event_pga.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lon</th>
      <th>lat</th>
      <th>pga</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-76.540896</td>
      <td>3.350158</td>
      <td>0.321998</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-76.544763</td>
      <td>3.350644</td>
      <td>0.390889</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-76.528079</td>
      <td>3.346550</td>
      <td>0.378206</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-76.529860</td>
      <td>3.356627</td>
      <td>0.410492</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-76.527918</td>
      <td>3.351601</td>
      <td>0.287797</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="section" id="Liquefaction-probabilities-using-the-HAZUS-model">
<h2>Liquefaction probabilities using the HAZUS model<a class="headerlink" href="#Liquefaction-probabilities-using-the-HAZUS-model" title="Permalink to this headline">¶</a></h2>
<p>The HAZUS model calculates the probabilities of liquefaction given the magnitude and PGA of an earthquake, the liquefaction category of the site, and the depth to groundwater at that site.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>hazus_liq_prob = hazus_liquefaction_probability(pga=event_pga[&quot;pga&quot;], mag=event_mag,
                                                liq_susc_cat=sites[&quot;susc_cat&quot;],
                                                groundwater_depth=sites[&quot;gwd&quot;])
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>plt.figure(figsize=(10,10))


plt.axis(&#39;equal&#39;)

plt.scatter(sites.lon, sites.lat, s=5, c=hazus_liq_prob)

plt.colorbar(label=&#39;Probability of liquefaction (HAZUS model)&#39;)

plt.title(&#39;Example liquefaction probabilities for Cali, Colombia&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.ylabel(&#39;Latitude&#39;)

plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_8_0.png" src="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_8_0.png" />
</div>
</div>
</div>
<div class="section" id="Liquefaction-probabilities-using-the-model-from-Zhu-et-al. (2015)">
<h2>Liquefaction probabilities using the model from Zhu et al. (2015)<a class="headerlink" href="#Liquefaction-probabilities-using-the-model-from-Zhu-et-al. (2015)" title="Permalink to this headline">¶</a></h2>
<p>The liquefaction probability model by Zhu et al (2015) is based on a multivariate logistic regression. The dependent variables are the magnitude and PGA from an earthquake, and the Vs30 and Compound topographic Index (CTI) at each site.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>zhu_liq_prob = zhu_liquefaction_probability_general(pga=event_pga[&quot;pga&quot;], mag=event_mag,
                                                    cti=sites[&quot;cti&quot;], vs30=sites[&quot;vs30&quot;])
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>plt.figure(figsize=(10,10))

plt.axis(&#39;equal&#39;)

plt.scatter(sites.lon, sites.lat, s=5, c=zhu_liq_prob)

plt.colorbar(label=&#39;Probability of liquefaction (Zhu model)&#39;)

plt.title(&#39;Example liquefaction probabilities for Cali, Colombia&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.ylabel(&#39;Latitude&#39;)

plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_12_0.png" src="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_12_0.png" />
</div>
</div>
</div>
<div class="section" id="Comparison">
<h2>Comparison<a class="headerlink" href="#Comparison" title="Permalink to this headline">¶</a></h2>
<p>The liquefaction models here are based on different types of data and were developed quite intependently. It is instructive to compare them.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>plt.figure(figsize=(10,10))

plt.axis(&#39;equal&#39;)

plt.scatter(sites.lon, sites.lat, s=5,
            c=zhu_liq_prob-hazus_liq_prob,
            vmin=-1., vmax=1.,
            cmap=&#39;RdBu_r&#39;)

plt.colorbar(label=&#39;Liquefaction prob. difference (Zhu - Hazus)&#39;)

plt.title(&#39;Comparison of liquefaction probabilities for Cali, Colombia&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.ylabel(&#39;Latitude&#39;)

plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_15_0.png" src="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_15_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>plt.figure(figsize=(10,10))

plt.axis(&#39;equal&#39;)
plt.scatter(hazus_liq_prob, zhu_liq_prob, c=event_pga[&quot;pga&quot;])

plt.plot([0,1],[0,1], &#39;k--&#39;, lw=0.5)

plt.title(&#39;Example liquefaction probabilities for Cali, Colombia&#39;)
plt.xlabel(&#39;Hazus liquefaction probability&#39;)
plt.ylabel(&#39;Zhu liquefaction probability&#39;)


plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_16_0.png" src="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_16_0.png" />
</div>
</div>
<p>It is clear from these plots that the two liquefaction models produce highly discrepant results. This is a warning that they should be implemented with caution, and calibrated on a local to regional level if at all possible. Both models may be calibrated by adjusting the coefficents for each variable relating soil strength and wetness to liquefaction.</p>
<p>Unfortunately, the tools for these calibrations are not implemented in the MBTK, although the functions used internally in the MBTK may accept modified coefficients.</p>
</div>
<div class="section" id="Lateral-spreading-displacements">
<h2>Lateral spreading displacements<a class="headerlink" href="#Lateral-spreading-displacements" title="Permalink to this headline">¶</a></h2>
<p>Displacements due to lateral spreading associated with liquefaction can be calculated given the earthquake’s PGA, magnitude, and the liquefaction susceptibility of each site. The model currently implemented is from HAZUS.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>hazus_displacements = hazus_lateral_spreading_displacement(event_mag, event_pga[&quot;pga&quot;], sites[&quot;susc_cat&quot;])
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>plt.figure(figsize=(10,10))
plt.axis(&#39;equal&#39;)

plt.scatter(sites.lon, sites.lat, s=5,
            c=hazus_displacements,
            )

plt.colorbar(label=&#39;Displacements from Lateral Spreading (m)&#39;)

plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_21_0.png" src="../../../_images/contents_sep_docs_tutorials_liquefaction_analysis_21_0.png" />
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="liq_site_prep.html" class="btn btn-neutral float-left" title="Tutorial: Preparing site data for liquefaction analysis with the OQ-MBTK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, GEM Hazard.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>